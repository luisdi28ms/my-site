<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Book</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			height: 100vh;
			overflow: hidden;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;

			font-family: sans-serif;
			background-color: powderblue;
		}

		/* Book */
		.book {
			position: relative;
			width: 45vw;
			height: 70vw;
			margin-top: 5vh;
			transition: transform 0.5s;
		}

		.paper {
			position: absolute;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
			perspective: 1500px;

		}

		.ctrl-center {
			margin-top: 5vh;
			position: relative;
		}

		.front,
		.back {
			background-color: white;
			position: absolute;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
			transform-origin: left;
			transition: transform 0.5s;
		}

		.front {
			z-index: 1;
			backface-visibility: hidden;
			border-left: 3px solid powderblue;
		}

		.back {
			z-index: 0;
		}

		.front-content,
		.back-content {
			width: 100%;
			height: 100%;
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.back-content {
			transform: rotateY(180deg)
		}

		/* Paper flip effect */
		.flipped .front,
		.flipped .back {
			transform: rotateY(-180deg);
		}

		/* Controller Buttons */
		button {
			border: none;
			background-color: transparent;
			cursor: pointer;
			margin: 10px;
			transition: transform 0.5s;
		}

		button:focus {
			outline: none;
		}

		button:hover i {
			color: #636363;
		}

		i {
			font-size: 50px;
			color: gray;
		}

		/* Paper stack order */
		#p1 {
			z-index: 3;
		}

		#p2 {
			z-index: 2;
		}

		#p3 {
			z-index: 1;
		}
	</style>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
		crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>


	<!-- Book -->
	<div id="book" class="book">
		<!-- Paper 1 -->
		<div id="p1" class="paper">
			<div class="front">
				<div id="f1" class="front-content">
					<h1>Front 1</h1>
				</div>
			</div>
			<div class="back">
				<div id="b1" class="back-content">
					<h1>Back 1</h1>
				</div>
			</div>
		</div>
		<!-- Paper 2 -->
		<div id="p2" class="paper">
			<div class="front">
				<div id="f2" class="front-content">
					<h1>Front 2</h1>
				</div>
			</div>
			<div class="back">
				<div id="b2" class="back-content">
					<h1>Back 2</h1>
				</div>
			</div>
		</div>
		<!-- Paper 3 -->
		<div id="p3" class="paper">
			<div class="front">
				<div id="f3" class="front-content">
					<h1>Front 3</h1>
				</div>
			</div>
			<div class="back">
				<div id="b3" class="back-content">
					<h1>Back 3</h1>
				</div>
			</div>
		</div>
	</div>

	<div class="ctrl-center" id="btns">
		<!-- Previous Button -->
		<button id="prev-btn" style="visibility: hidden;">
			<i class="fas fa-arrow-circle-left"></i>
		</button>
		<!-- Next Button -->
		<button id="next-btn" style="visibility: visible;">
			<i class="fas fa-arrow-circle-right"></i>
		</button>

	</div>
</body>
<script defer>
	// References to DOM Elements
	const prevBtn = document.querySelector("#prev-btn");
	const nextBtn = document.querySelector("#next-btn");
	const book = document.querySelector("#book");

	const paper1 = document.querySelector("#p1");
	const paper2 = document.querySelector("#p2");
	const paper3 = document.querySelector("#p3");

	// Event Listener
	prevBtn.addEventListener("click", goPrevPage);
	nextBtn.addEventListener("click", goNextPage);

	// Business Logic
	let currentLocation = 1;
	let numOfPapers = 3;
	let maxLocation = numOfPapers + 1;

	function openBook() {
		book.style.transform = "translateX(50%)";
		nextBtn.style.visibility = "visible";
		prevBtn.style.visibility = "visible";
	}

	function closeBook(isAtBeginning) {
		if (isAtBeginning) {
			book.style.transform = "translateX(0%)";
			prevBtn.style.visibility = "hidden";
		} else {
			book.style.transform = "translateX(100%)";
			nextBtn.style.visibility = "hidden";
		}

	}

	function goNextPage() {
		if (currentLocation < maxLocation) {
			switch (currentLocation) {
				case 1:
					openBook();
					paper1.classList.add("flipped");
					paper1.style.zIndex = 1;
					break;
				case 2:
					paper2.classList.add("flipped");
					paper2.style.zIndex = 2;
					break;
				case 3:
					paper3.classList.add("flipped");
					paper3.style.zIndex = 3;
					closeBook(false);
					break;
				default:
					throw new Error("unkown state");
			}
			currentLocation++;
		}
	}

	function goPrevPage() {
		if (currentLocation > 1) {
			switch (currentLocation) {
				case 2:
					closeBook(true);
					paper1.classList.remove("flipped");
					paper1.style.zIndex = 3;
					break;
				case 3:
					paper2.classList.remove("flipped");
					paper2.style.zIndex = 2;
					break;
				case 4:
					openBook();
					paper3.classList.remove("flipped");
					paper3.style.zIndex = 1;
					break;
				default:
					throw new Error("unkown state");
			}

			currentLocation--;
		}
	}</script>

</html>
